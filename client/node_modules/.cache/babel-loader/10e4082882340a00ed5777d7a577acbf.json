{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cag0398\\\\Desktop\\\\forums\\\\client\\\\src\\\\Posts.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Header } from './Header';\nimport { dateToString } from './postDate';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Post = ({\n  id,\n  author,\n  title,\n  commentCount,\n  likes,\n  date\n}) => {\n  const dateString = dateToString(date);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `post/${id}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"postContents\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"postTitle\",\n          children: `${author}: ${title}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 13,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"postComments\",\n          children: [`${commentCount} comments`, /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \\u25CF \", dateString]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 16,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"postLikes\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"far fa-thumbs-up\",\n        children: ` ${likes}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Post;\n\nconst Posts = ({\n  pageNum\n}) => {\n  _s();\n\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    fetch(`http://localhost:3001/be/getPosts/${pageNum}`).then(response => response.json()).then(posts => {\n      if (!posts.err) {\n        setData(d => {\n          if (d) {\n            return [...d, ...posts];\n          } else {\n            return posts;\n          }\n        });\n      }\n    });\n  }, [pageNum]);\n\n  if (!data) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 12\n    }, this);\n  } else {\n    return data.map(({\n      _id,\n      author,\n      title,\n      commentCount,\n      likes,\n      date\n    }) => /*#__PURE__*/_jsxDEV(Post, {\n      id: _id,\n      author: author,\n      title: title,\n      commentCount: commentCount,\n      likes: likes,\n      date: date\n    }, _id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this));\n  }\n};\n\n_s(Posts, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n\n_c2 = Posts;\n\nconst Page = () => {\n  _s2();\n\n  const [currPage, setCurrPage] = useState(1);\n  let loading = false;\n  let timeout = null;\n\n  const nextPage = () => {\n    setCurrPage(currPage + 1);\n  };\n\n  const handleScroll = () => {\n    console.log('hi');\n\n    if (window.innerHeight + window.pageYOffset >= document.body.offsetHeight - 2 && !loading) {\n      loading = true;\n      nextPage();\n      timeout = setTimeout(() => {\n        loading = false;\n      }, 500);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll); // console.log(window.visualViewport.width < window.Width);\n\n    console.log('hi1');\n    return () => {\n      clearTimeout(timeout);\n      window.removeEventListener('scroll', handleScroll);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts\",\n    children: /*#__PURE__*/_jsxDEV(Posts, {\n      pageNum: currPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(Page, \"mai98acWYfqUoUAVOzYPtz6T+Nw=\");\n\n_c3 = Page;\nexport const Feed = () => {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Page, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_c4 = Feed;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Post\");\n$RefreshReg$(_c2, \"Posts\");\n$RefreshReg$(_c3, \"Page\");\n$RefreshReg$(_c4, \"Feed\");","map":{"version":3,"sources":["C:/Users/cag0398/Desktop/forums/client/src/Posts.js"],"names":["useEffect","useState","Link","Header","dateToString","Post","id","author","title","commentCount","likes","date","dateString","Posts","pageNum","data","setData","fetch","then","response","json","posts","err","d","map","_id","Page","currPage","setCurrPage","loading","timeout","nextPage","handleScroll","console","log","window","innerHeight","pageYOffset","document","body","offsetHeight","setTimeout","addEventListener","clearTimeout","removeEventListener","Feed"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Header } from './Header';\r\nimport { dateToString } from './postDate';\r\n\r\nconst Post = ({ id, author, title, commentCount, likes, date }) => {\r\n  const dateString = dateToString(date);\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <Link to={`post/${id}`}>\r\n        <div className=\"postContents\">\r\n          <h3 className=\"postTitle\">{`${author}: ${title}`}</h3>\r\n          <p className=\"postComments\">\r\n            {`${commentCount} comments`}\r\n            <span> &#x25CF; {dateString}</span>\r\n          </p>\r\n        </div>\r\n      </Link>\r\n      <p className=\"postLikes\">\r\n        <i className=\"far fa-thumbs-up\">{` ${likes}`}</i>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Posts = ({ pageNum }) => {\r\n  const [data, setData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:3001/be/getPosts/${pageNum}`)\r\n      .then((response) => response.json())\r\n      .then((posts) => {\r\n        if (!posts.err) {\r\n          setData((d) => {\r\n            if (d) {\r\n              return [...d, ...posts];\r\n            } else {\r\n              return posts;\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }, [pageNum]);\r\n\r\n  if (!data) {\r\n    return <h1>Loading...</h1>;\r\n  } else {\r\n    return data.map(({ _id, author, title, commentCount, likes, date }) => (\r\n      <Post\r\n        key={_id}\r\n        id={_id}\r\n        author={author}\r\n        title={title}\r\n        commentCount={commentCount}\r\n        likes={likes}\r\n        date={date}\r\n      />\r\n    ));\r\n  }\r\n};\r\n\r\nconst Page = () => {\r\n  const [currPage, setCurrPage] = useState(1);\r\n  let loading = false;\r\n  let timeout = null;\r\n\r\n  const nextPage = () => {\r\n    setCurrPage(currPage + 1);\r\n  };\r\n\r\n  const handleScroll = () => {\r\n    console.log('hi');\r\n    if (\r\n      window.innerHeight + window.pageYOffset >=\r\n        document.body.offsetHeight - 2 &&\r\n      !loading\r\n    ) {\r\n      loading = true;\r\n      nextPage();\r\n      timeout = setTimeout(() => {\r\n        loading = false;\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    // console.log(window.visualViewport.width < window.Width);\r\n    console.log('hi1');\r\n\r\n    return () => {\r\n      clearTimeout(timeout);\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"posts\">\r\n      <Posts pageNum={currPage} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Feed = () => {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Page />\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}