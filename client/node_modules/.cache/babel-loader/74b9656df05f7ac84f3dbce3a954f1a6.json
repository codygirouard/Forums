{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cag0398\\\\Desktop\\\\forums\\\\client\\\\src\\\\Posts.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useReducer, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Header } from './Header';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Post = ({\n  id,\n  author,\n  title,\n  commentCount,\n  likes\n}) => {\n  const handleClick = e => {\n    if (e.target.id !== 'likes') {\n      console.log(`${id} clicked`);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    onClick: handleClick,\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: id,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"postContents\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"postTitle\",\n          children: `${author}: ${title}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"postComments\",\n          children: `${commentCount} comments`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"postLikes\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"far fa-thumbs-up\",\n        id: \"likes\",\n        children: ` ${likes}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Post;\n\nconst Posts = ({\n  pageNum\n}) => {\n  _s();\n\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    fetch(`http://localhost:3001/be/getPosts/${pageNum}`).then(response => response.json()).then(posts => {\n      if (!posts.err) {\n        setData(d => {\n          if (d) {\n            return [...d, ...posts];\n          } else {\n            return posts;\n          }\n        });\n      }\n    });\n  }, [pageNum]);\n\n  if (!data) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 12\n    }, this);\n  } else {\n    return data.map(({\n      _id,\n      author,\n      title,\n      commentCount,\n      likes\n    }) => /*#__PURE__*/_jsxDEV(Post, {\n      id: _id,\n      author: author,\n      title: title,\n      commentCount: commentCount,\n      likes: likes\n    }, _id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this));\n  }\n};\n\n_s(Posts, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n\n_c2 = Posts;\n\nconst Page = () => {\n  _s2();\n\n  const [currPage, setCurrPage] = useState(1);\n  const [loading, toggleLoading] = useReducer(loading => !loading, false);\n  const [countdown, setCountdown] = useState(null);\n\n  const nextPage = () => {\n    setCurrPage(currPage + 1);\n  };\n\n  const handleScroll = () => {\n    if (window.innerHeight + window.pageYOffset >= document.body.offsetHeight - 2 && !loading) {\n      toggleLoading();\n      nextPage();\n      setCountdown(setTimeout(toggleLoading, 500));\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      clearTimeout(countdown);\n      window.removeEventListener('scroll', handleScroll);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts\",\n    children: /*#__PURE__*/_jsxDEV(Posts, {\n      pageNum: currPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(Page, \"VxlAfQMz11Idnsgcw+gLtHA7V4c=\");\n\n_c3 = Page;\nexport const Feed = () => {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Page, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_c4 = Feed;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Post\");\n$RefreshReg$(_c2, \"Posts\");\n$RefreshReg$(_c3, \"Page\");\n$RefreshReg$(_c4, \"Feed\");","map":{"version":3,"sources":["C:/Users/cag0398/Desktop/forums/client/src/Posts.js"],"names":["useEffect","useReducer","useState","Link","Header","Post","id","author","title","commentCount","likes","handleClick","e","target","console","log","Posts","pageNum","data","setData","fetch","then","response","json","posts","err","d","map","_id","Page","currPage","setCurrPage","loading","toggleLoading","countdown","setCountdown","nextPage","handleScroll","window","innerHeight","pageYOffset","document","body","offsetHeight","setTimeout","addEventListener","clearTimeout","removeEventListener","Feed"],"mappings":";;;;AAAA,SAASA,SAAT,EAAoBC,UAApB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,MAAT,QAAuB,UAAvB;;;;AAEA,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA,EAAF;AAAMC,EAAAA,MAAN;AAAcC,EAAAA,KAAd;AAAqBC,EAAAA,YAArB;AAAmCC,EAAAA;AAAnC,CAAD,KAAgD;AAC3D,QAAMC,WAAW,GAAIC,CAAD,IAAO;AACzB,QAAIA,CAAC,CAACC,MAAF,CAASP,EAAT,KAAgB,OAApB,EAA6B;AAC3BQ,MAAAA,OAAO,CAACC,GAAR,CAAa,GAAET,EAAG,UAAlB;AACD;AACF,GAJD;;AAMA,sBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAsB,IAAA,OAAO,EAAEK,WAA/B;AAAA,4BACE,QAAC,IAAD;AAAM,MAAA,EAAE,EAAEL,EAAV;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,WAAd;AAAA,oBAA4B,GAAEC,MAAO,KAAIC,KAAM;AAA/C;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA,oBAA8B,GAAEC,YAAa;AAA7C;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAOE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA,6BACE;AAAG,QAAA,SAAS,EAAC,kBAAb;AAAgC,QAAA,EAAE,EAAC,OAAnC;AAAA,kBACI,IAAGC,KAAM;AADb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAPF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAeD,CAtBD;;KAAML,I;;AAwBN,MAAMW,KAAK,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAAA;;AAC7B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,CAAC,IAAD,CAAhC;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,KAAK,CAAE,qCAAoCH,OAAQ,EAA9C,CAAL,CACGI,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,KAAD,IAAW;AACf,UAAI,CAACA,KAAK,CAACC,GAAX,EAAgB;AACdN,QAAAA,OAAO,CAAEO,CAAD,IAAO;AACb,cAAIA,CAAJ,EAAO;AACL,mBAAO,CAAC,GAAGA,CAAJ,EAAO,GAAGF,KAAV,CAAP;AACD,WAFD,MAEO;AACL,mBAAOA,KAAP;AACD;AACF,SANM,CAAP;AAOD;AACF,KAZH;AAaD,GAdQ,EAcN,CAACP,OAAD,CAdM,CAAT;;AAgBA,MAAI,CAACC,IAAL,EAAW;AACT,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACD,GAFD,MAEO;AACL,WAAOA,IAAI,CAACS,GAAL,CAAS,CAAC;AAAEC,MAAAA,GAAF;AAAOrB,MAAAA,MAAP;AAAeC,MAAAA,KAAf;AAAsBC,MAAAA,YAAtB;AAAoCC,MAAAA;AAApC,KAAD,kBACd,QAAC,IAAD;AAEE,MAAA,EAAE,EAAEkB,GAFN;AAGE,MAAA,MAAM,EAAErB,MAHV;AAIE,MAAA,KAAK,EAAEC,KAJT;AAKE,MAAA,YAAY,EAAEC,YALhB;AAME,MAAA,KAAK,EAAEC;AANT,OACOkB,GADP;AAAA;AAAA;AAAA;AAAA,YADK,CAAP;AAUD;AACF,CAjCD;;GAAMZ,K;;MAAAA,K;;AAmCN,MAAMa,IAAI,GAAG,MAAM;AAAA;;AACjB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0B7B,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAAC8B,OAAD,EAAUC,aAAV,IAA2BhC,UAAU,CAAE+B,OAAD,IAAa,CAACA,OAAf,EAAwB,KAAxB,CAA3C;AACA,QAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BjC,QAAQ,CAAC,IAAD,CAA1C;;AAEA,QAAMkC,QAAQ,GAAG,MAAM;AACrBL,IAAAA,WAAW,CAACD,QAAQ,GAAG,CAAZ,CAAX;AACD,GAFD;;AAIA,QAAMO,YAAY,GAAG,MAAM;AACzB,QACEC,MAAM,CAACC,WAAP,GAAqBD,MAAM,CAACE,WAA5B,IACEC,QAAQ,CAACC,IAAT,CAAcC,YAAd,GAA6B,CAD/B,IAEA,CAACX,OAHH,EAIE;AACAC,MAAAA,aAAa;AACbG,MAAAA,QAAQ;AACRD,MAAAA,YAAY,CAACS,UAAU,CAACX,aAAD,EAAgB,GAAhB,CAAX,CAAZ;AACD;AACF,GAVD;;AAYAjC,EAAAA,SAAS,CAAC,MAAM;AACdsC,IAAAA,MAAM,CAACO,gBAAP,CAAwB,QAAxB,EAAkCR,YAAlC;AAEA,WAAO,MAAM;AACXS,MAAAA,YAAY,CAACZ,SAAD,CAAZ;AACAI,MAAAA,MAAM,CAACS,mBAAP,CAA2B,QAA3B,EAAqCV,YAArC;AACD,KAHD;AAID,GAPQ,CAAT;AASA,sBACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA,2BACE,QAAC,KAAD;AAAO,MAAA,OAAO,EAAEP;AAAhB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CAnCD;;IAAMD,I;;MAAAA,I;AAqCN,OAAO,MAAMmB,IAAI,GAAG,MAAM;AACxB,sBACE;AAAA,4BACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA,kBADF;AAMD,CAPM;MAAMA,I","sourcesContent":["import { useEffect, useReducer, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Header } from './Header';\r\n\r\nconst Post = ({ id, author, title, commentCount, likes }) => {\r\n  const handleClick = (e) => {\r\n    if (e.target.id !== 'likes') {\r\n      console.log(`${id} clicked`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"post\" onClick={handleClick}>\r\n      <Link to={id}>\r\n        <div className=\"postContents\">\r\n          <h3 className=\"postTitle\">{`${author}: ${title}`}</h3>\r\n          <p className=\"postComments\">{`${commentCount} comments`}</p>\r\n        </div>\r\n      </Link>\r\n      <p className=\"postLikes\">\r\n        <i className=\"far fa-thumbs-up\" id=\"likes\">\r\n          {` ${likes}`}\r\n        </i>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Posts = ({ pageNum }) => {\r\n  const [data, setData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:3001/be/getPosts/${pageNum}`)\r\n      .then((response) => response.json())\r\n      .then((posts) => {\r\n        if (!posts.err) {\r\n          setData((d) => {\r\n            if (d) {\r\n              return [...d, ...posts];\r\n            } else {\r\n              return posts;\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }, [pageNum]);\r\n\r\n  if (!data) {\r\n    return <h1>Loading...</h1>;\r\n  } else {\r\n    return data.map(({ _id, author, title, commentCount, likes }) => (\r\n      <Post\r\n        key={_id}\r\n        id={_id}\r\n        author={author}\r\n        title={title}\r\n        commentCount={commentCount}\r\n        likes={likes}\r\n      />\r\n    ));\r\n  }\r\n};\r\n\r\nconst Page = () => {\r\n  const [currPage, setCurrPage] = useState(1);\r\n  const [loading, toggleLoading] = useReducer((loading) => !loading, false);\r\n  const [countdown, setCountdown] = useState(null);\r\n\r\n  const nextPage = () => {\r\n    setCurrPage(currPage + 1);\r\n  };\r\n\r\n  const handleScroll = () => {\r\n    if (\r\n      window.innerHeight + window.pageYOffset >=\r\n        document.body.offsetHeight - 2 &&\r\n      !loading\r\n    ) {\r\n      toggleLoading();\r\n      nextPage();\r\n      setCountdown(setTimeout(toggleLoading, 500));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n\r\n    return () => {\r\n      clearTimeout(countdown);\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"posts\">\r\n      <Posts pageNum={currPage} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Feed = () => {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Page />\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}