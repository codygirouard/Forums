{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cag0398\\\\Desktop\\\\forums\\\\client\\\\src\\\\Posts.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Header } from './header';\nimport { dateToString } from './postDate';\nimport { LikeButton } from './like';\nimport Alert from './alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst newPostButton = () => {\n  return /*#__PURE__*/_jsxDEV(Link, {\n    to: 'newPost',\n    children: \"+\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 10\n  }, this);\n};\n\nconst Post = ({\n  id,\n  author,\n  title,\n  commentCount,\n  likes,\n  usersLiked,\n  date\n}) => {\n  const dateString = dateToString(date);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(LikeButton, {\n      totalLikes: likes,\n      usersLiked: usersLiked,\n      postId: id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: `post/${id}`,\n      className: \"commentLink\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"postContents\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"postTitle\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"postAuthor\",\n          children: `Posted by ${author} ${dateString}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"postComments\",\n          children: `${commentCount} comments`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Post;\n\nconst Posts = ({\n  pageNum\n}) => {\n  _s();\n\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    fetch(`http://localhost:3001/be/getPosts/${pageNum}`).then(response => response.json()).then(posts => {\n      if (!posts.err) {\n        setData(d => {\n          if (d) {\n            return [...d, ...posts];\n          } else {\n            return posts;\n          }\n        });\n      }\n    });\n  }, [pageNum]);\n\n  if (!data) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 12\n    }, this);\n  } else {\n    return data.map(({\n      _id,\n      author,\n      title,\n      commentCount,\n      likes,\n      usersLiked,\n      date\n    }) => /*#__PURE__*/_jsxDEV(Post, {\n      id: _id,\n      author: author,\n      title: title,\n      commentCount: commentCount,\n      likes: likes,\n      usersLiked: usersLiked,\n      date: date\n    }, _id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this));\n  }\n};\n\n_s(Posts, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n\n_c2 = Posts;\n\nconst Page = () => {\n  _s2();\n\n  const [currPage, setCurrPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  let timeout = null;\n\n  const nextPage = () => {\n    setCurrPage(currPage + 1);\n  };\n\n  const handleScroll = () => {\n    if (window.innerHeight + window.pageYOffset >= document.body.offsetHeight - 2 && !loading) {\n      setLoading(true);\n      nextPage();\n      timeout = setTimeout(() => {\n        setLoading(false);\n      }, 500);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      clearTimeout(timeout);\n      window.removeEventListener('scroll', handleScroll);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts\",\n    children: /*#__PURE__*/_jsxDEV(Posts, {\n      pageNum: currPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(Page, \"w301rb8c6Ut2EEAeu/2snxOFjgI=\");\n\n_c3 = Page;\nexport const Feed = () => {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      scroll: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Page, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"newPostButton\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_c4 = Feed;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Post\");\n$RefreshReg$(_c2, \"Posts\");\n$RefreshReg$(_c3, \"Page\");\n$RefreshReg$(_c4, \"Feed\");","map":{"version":3,"sources":["C:/Users/cag0398/Desktop/forums/client/src/Posts.js"],"names":["useEffect","useState","Link","Header","dateToString","LikeButton","Alert","newPostButton","Post","id","author","title","commentCount","likes","usersLiked","date","dateString","Posts","pageNum","data","setData","fetch","then","response","json","posts","err","d","map","_id","Page","currPage","setCurrPage","loading","setLoading","timeout","nextPage","handleScroll","window","innerHeight","pageYOffset","document","body","offsetHeight","setTimeout","addEventListener","clearTimeout","removeEventListener","Feed"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Header } from './header';\r\nimport { dateToString } from './postDate';\r\nimport { LikeButton } from './like';\r\nimport Alert from './alert';\r\n\r\nconst newPostButton = () => {\r\n  return <Link to={'newPost'}>+</Link>;\r\n};\r\n\r\nconst Post = ({ id, author, title, commentCount, likes, usersLiked, date }) => {\r\n  const dateString = dateToString(date);\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <LikeButton totalLikes={likes} usersLiked={usersLiked} postId={id} />\r\n      <Link to={`post/${id}`} className=\"commentLink\">\r\n        <div className=\"postContents\">\r\n          <h3 className=\"postTitle\">{title}</h3>\r\n          <h4 className=\"postAuthor\">{`Posted by ${author} ${dateString}`}</h4>\r\n          <p className=\"postComments\">{`${commentCount} comments`}</p>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Posts = ({ pageNum }) => {\r\n  const [data, setData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:3001/be/getPosts/${pageNum}`)\r\n      .then((response) => response.json())\r\n      .then((posts) => {\r\n        if (!posts.err) {\r\n          setData((d) => {\r\n            if (d) {\r\n              return [...d, ...posts];\r\n            } else {\r\n              return posts;\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }, [pageNum]);\r\n\r\n  if (!data) {\r\n    return <div className=\"loader\"></div>;\r\n  } else {\r\n    return data.map(\r\n      ({ _id, author, title, commentCount, likes, usersLiked, date }) => (\r\n        <Post\r\n          key={_id}\r\n          id={_id}\r\n          author={author}\r\n          title={title}\r\n          commentCount={commentCount}\r\n          likes={likes}\r\n          usersLiked={usersLiked}\r\n          date={date}\r\n        />\r\n      )\r\n    );\r\n  }\r\n};\r\n\r\nconst Page = () => {\r\n  const [currPage, setCurrPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  let timeout = null;\r\n\r\n  const nextPage = () => {\r\n    setCurrPage(currPage + 1);\r\n  };\r\n\r\n  const handleScroll = () => {\r\n    if (\r\n      window.innerHeight + window.pageYOffset >=\r\n        document.body.offsetHeight - 2 &&\r\n      !loading\r\n    ) {\r\n      setLoading(true);\r\n      nextPage();\r\n      timeout = setTimeout(() => {\r\n        setLoading(false);\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n\r\n    return () => {\r\n      clearTimeout(timeout);\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"posts\">\r\n      <Posts pageNum={currPage} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Feed = () => {\r\n  return (\r\n    <>\r\n      <Header scroll={true} />\r\n      <Page />\r\n      <newPostButton />\r\n      <Alert />\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}